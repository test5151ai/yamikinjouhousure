# 闇金情報スレ掲示板

5ちゃんねる風の匿名掲示板システム

## 概要

闇金に関する情報を共有するための5ch風掲示板です。
デザイン・機能ともに5ちゃんねるを模倣しています。

## 技術スタック

| 項目 | 技術 |
|------|------|
| フレームワーク | SvelteKit |
| 言語 | TypeScript |
| データベース | SQLite |
| ORM | Drizzle |
| 開発環境 | Docker + Docker Compose |
| 本番環境 | Coolify (VPS) |

## 機能一覧

### 一般ユーザー機能
- スレッド一覧表示（トップページ）
- スレッド詳細閲覧
- レス投稿
- アンカー機能（`>>1` 形式）
- ID表示（IP + 日付ベースのハッシュ、日替わり）
- トリップ機能（`名前#パスワード` → `◆xxxxx`）
- sage機能（メール欄に `sage` でage回避）

### 管理者機能
- 管理者ログイン
- スレッド削除
- レス削除
- IP規制（BAN）
- 管理者書き込み（★マーク表示）

## URL構成

| URL | 説明 |
|-----|------|
| `/search?q=闇金情報スレ` | トップページ（スレッド一覧） |
| `/test/read.cgi/debt/{threadId}` | スレッド詳細ページ |
| `/admin` | 管理者ログイン |
| `/admin/dashboard` | 管理者ダッシュボード |

## 仕様

### スレッド
- 1スレッド最大1000レス
- 1000レス到達で自動的にdat落ち
- 次スレは手動で作成

### ID生成
- `IP + 日付 + シークレット` からSHA256ハッシュを生成
- 先頭8文字を使用
- 日付が変わるとIDも変更

### トリップ生成
- `名前#パスワード` 形式で入力
- パスワードをSHA256でハッシュ化
- `◆` + 先頭10文字で表示

### 勢い計算
```
勢い = レス数 / ((現在時刻 - スレ作成時刻) / 86400)
```

## 開発

### 必要条件
- Docker
- Docker Compose

### 起動方法

```bash
# 開発環境起動
docker compose up -d

# ログ確認
docker compose logs -f

# 停止
docker compose down
```

開発サーバー: http://localhost:5173

### データベース

SQLiteファイルは `./data/sqlite.db` に永続化されます。

## デプロイ（Coolify）

1. CoolifyでGitリポジトリを連携
2. Dockerfile ベースでデプロイ設定
3. 環境変数を設定:
   - `ADMIN_PASSWORD`: 管理者パスワード
   - `SECRET_KEY`: ID生成用シークレット
4. ボリュームマウント: `/app/data` を永続化

## 環境変数

| 変数名 | 説明 | デフォルト |
|--------|------|------------|
| `ADMIN_PASSWORD` | 管理者パスワード | (必須) |
| `SECRET_KEY` | ID生成用シークレットキー | (必須) |
| `DATABASE_PATH` | SQLiteファイルパス | `./data/sqlite.db` |

## ライセンス

Private
